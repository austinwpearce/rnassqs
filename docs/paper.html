<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summary • rnassqs</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>



<meta property="og:title" content="Summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rnassqs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/rnassqs.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/rnassqs">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Summary</h1>
    </div>


<hr>
<p>title: “rnassqs: An <code>R</code> package to access agricultural data via the USDA National Agricultural Statistics Service (USDA-NASS) ‘Quick Stats’ API” authors:</p>
<ul>
<li>affiliation: 1 email: <a href="mailto:potter.nicholas@gmail.com" class="email">potter.nicholas@gmail.com</a> name: Nicholas A. Potter orcid: 0000-0002-3410-3732 date: “09 June 2019” output: pdf_document bibliography: paper.bib tags:</li>
<li>R</li>
<li>API</li>
<li>reproducibility affiliations:</li>
<li>index: 1 name: Washington State University —</li>
</ul>
<div id="summary" class="section level1">

<p>The <a href="https://github.com/ropensci/rnassqs">rnassqs</a> <code>R</code> package [@rnassqs] is an API wrapper for the United States Department of Agriculture National Agricultural Statistics Service (USDA-NASS) ‘<a href="https://quickstats.nass.usda.gov/">Quick Stats</a>’ API [@quickstats]. The core functionality allows the user to query agricultural data from ‘Quick Stats’ in a reproducible and automated way.</p>
<p><code>rnassqs</code> manages API authentication by setting a system environmental variable for the duration of the <code>R</code> session. Convenience functions facilitate querying common data. Users can also use <code>rnassqs</code> to query the list of data parameters and available values for a given parameter (for example, to see the commodities available). The query can request data in JSON or CSV formats, and parses that data into a <code>data.frame</code> object.</p>
<p><code>rnassqs</code> was written to address issues that arise from accessing data via a point-and-click interface, particularly in terms of automation and reproducibility of data requests.</p>
</div>
<div id="about-usda-nass-data-and-quick-stats" class="section level1">
<h1 class="hasAnchor">
<a href="#about-usda-nass-data-and-quick-stats" class="anchor"></a>About USDA-NASS data and ‘Quick Stats’</h1>
<p>‘Quick Stats’ is a web interface to access data produced by USDA-NASS. The data comes primarily from the Census of Agriculture [@agCensus], but also includes data from USDA-NASS surveys on a wide range of topics. The Census of Agriculture is conducted every five years in years ending in ‘2’ and ‘7’. The most recent census was completed in 2017. ‘Quick Stats’ provides access to census data beginning in 1997, and some survey data as far back as 1850.</p>
<p>Aggregate data from the census and surveys is released primarily at the national, state, and county level, though some data may be released for congressional districts, watersheds, and zip codes. It includes a range of data classified under five sectors: Animals &amp; Products, Crops, Demographics, Economics, and Environmental. Examples of data available in these sectors include counts of farms, farm operators, acres of cropland, farm sales, farm expenses, and crop yields, to name a few.</p>
</div>
<div id="benefits-of-rnassqs-over-quick-stats" class="section level1">
<h1 class="hasAnchor">
<a href="#benefits-of-rnassqs-over-quick-stats" class="anchor"></a>Benefits of <code>rnassqs</code> over ‘Quick Stats’</h1>
<p>‘Quick Stats’ provides a number of selection fields in which the user can select categories of data. Selections available in each field change to reflect available options based on other selections that the user has made. Data requests are limited to 50,000 records. This works well for exploration of available data or quick access to data for a single use. However, there are several cases in which the ‘Quick Stats’ interface is not ideal:</p>
<ul>
<li>Requests for a combination of crops, years, and geographies that exceed 50,000 records.</li>
<li>Requests for newly released data that are identical to previous requests.</li>
<li>Requests that are reproducible.</li>
</ul>
<p><code>rnassqs</code> addresses each of these issues by making the ‘Quick Stats’ API accessible with <code>R</code> code. This allows the user to loop over a series of requests to address the first issue, to execute (perhaps automated on a schedule) a data request repeatedly to access new data with the same query to address the second, and to make code available that allows others to reproducibly access the same data to address the third.</p>
<p>For example, there are currently there are currently 332,125 records of crop yields in all U.S. counties from 2000 to 2018. Accessing this data through ‘Quick Stats’ would require manually selecting either a set of years or a set of states to reduce each request to less than 50,000 records and then aggregating that data. With <code>rnassqs</code> this can be done with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Access yields for all counties and all crops</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>params &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">sector_desc =</span> <span class="st">"CROPS"</span>,</span>
<span id="cb1-3"><a href="#cb1-3"></a>               <span class="dt">group_desc =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"FIELD CROPS"</span>, <span class="st">"FRUIT &amp; TREE NUTS"</span>, </span>
<span id="cb1-4"><a href="#cb1-4"></a>                              <span class="st">"HORTICULTURE"</span>, <span class="st">"VEGETABLES"</span>),</span>
<span id="cb1-5"><a href="#cb1-5"></a>               <span class="dt">statisticcat_desc =</span> <span class="st">"YIELD"</span>, </span>
<span id="cb1-6"><a href="#cb1-6"></a>               <span class="dt">agg_level_desc =</span> <span class="st">"COUNTY"</span>)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Get all years from 2000 to 2018 in a list of data.frames</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>data_list &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="dv">2000</span><span class="op">:</span><span class="dv">2018</span>, <span class="cf">function</span>(yr) { </span>
<span id="cb1-10"><a href="#cb1-10"></a>  params<span class="op">$</span>year &lt;-<span class="st"> </span>yr</span>
<span id="cb1-11"><a href="#cb1-11"></a>  rnassqs<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/rnassqs/topics/nassqs">nassqs</a></span>(params, <span class="dt">url_only =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1-12"><a href="#cb1-12"></a>})</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co"># Aggregate the list of data.frames into a single data.frame</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>d &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/do.call">do.call</a></span>(<span class="st">"rbind"</span>, data_list)</span></code></pre></div>
</div>
<div id="alternatives-to-rnassqs" class="section level1">
<h1 class="hasAnchor">
<a href="#alternatives-to-rnassqs" class="anchor"></a>Alternatives to <code>rnassqs</code>
</h1>
<p>USDA-NASS also provides FTP access to text data files^[Available at: <a href="ftp://ftp.nass.usda.gov/quickstats/">ftp://ftp.nass.usda.gov/quickstats/</a>]. By accessing the data via FTP users can avoid using the selection interface of ‘Quick Stats’ and avoid limitations on the number of records per request, but do not resolve issues of automated repeated requests or of making data requests reproducible.</p>
</div>
<div id="acknowledgements" class="section level1">
<h1 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h1>
<p>Thank you to Jonathan Adams, Julia Piaskowski, and Joseph Stachelek for code contributions. A huge thanks to reviewers Adam H Sparks and Neal Richardson for their thoughtful feedback to improve the package and documentation.</p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
</div>


  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicholas Potter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

