<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access the NASS 'Quick Stats' API • rnassqs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access the NASS 'Quick Stats' API">
<meta property="og:description" content="Interface to access data via the United States Department of 
  Agricultre's National Agricultural Statistical Service (NASS) 'Quick Stats' 
  web API &lt;https://quickstats.nass.usda.gov/api&gt;. Convenience functions 
  facilitate building queries based on available parameters and valid parameter 
  values.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rnassqs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/rnassqs.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/potterzot/rnassqs">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<table class="table table table">
<thead><tr class="header">
<th align="left">
Usage
</th>
<th align="left">
Release
</th>
<th align="left">
Development
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">
<a href="http://choosealicense.com/licenses/mit/"><img src="https://img.shields.io/github/license/mashape/apistatus.svg" alt="License"></a>
</td>
<td align="left">
<a href="https://cran.r-project.org/package=rnassqs"><img src="http://www.r-pkg.org/badges/version-last-release/rnassqs" alt="CRAN"></a>
</td>
<td align="left">
<a href="https://github.com/potterzot/rnassqs/commits/master"><img src="https://img.shields.io/badge/last%20change-2019--07--23-brightgreen.svg" alt="Last Change"></a>
</td>
</tr>
<tr class="even">
<td align="left">
<a href="https://CRAN.R-project.org/package=rnassqs"><img src="https://cranlogs.r-pkg.org/badges/rnassqs" alt="downloads"></a>
</td>
<td align="left">
<a href="https://zenodo.org/badge/latestdoi/37335585"><img src="https://zenodo.org/badge/37335585.svg" alt="Zenodo"></a>
</td>
<td align="left">
<a href="https://travis-ci.org/potterzot/rnassqs"><img src="https://travis-ci.org/potterzot/rnassqs.svg?branch=master" alt="Build Status"></a>
</td>
</tr>
<tr class="odd">
<td align="left">
</td>
<td align="left">
<a href="http://orcid.org/0000-0002-3410-3732"><img src="https://img.shields.io/badge/ORCiD-0000--0002--3410--3732-green.svg" alt="ORCID"></a>
</td>
<td align="left">
<a href="https://coveralls.io/github/potterzot/rnassqs?branch=master"><img src="https://coveralls.io/repos/github/potterzot/rnassqs/badge.svg?branch=master" alt="Coverage Status"></a>
</td>
</tr>
<tr class="even">
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
<a href="https://www.repostatus.org/#WIP"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a>
</td>
</tr>
<tr class="even">
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
<a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Project Status: Experimental."></a>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<div id="rnassqs-r-nass-quick-stats" class="section level2">
<h2 class="hasAnchor">
<a href="#rnassqs-r-nass-quick-stats" class="anchor"></a>rnassqs (R NASS Quick Stats)</h2>
<p>This is a package that allows users to access the USDA’s National Agricultural Statistics Service (NASS) ‘Quick Stats’ data through their API. It is fairly low level and does not include a lot of scaffolding or setup. Some things may change, but at this point it is relatively stable.</p>
</div>
<div id="installing" class="section level2">
<h2 class="hasAnchor">
<a href="#installing" class="anchor"></a>Installing</h2>
<p>Install the package via <code>devtools</code> or CRAN:</p>
<pre><code><a href="https://www.rdocumentation.org/packages/base/topics/library"># Via devtools
library(devtools)
install_github('potterzot/rnassqs')

# Via CRAN
install.packages("rnassqs")</a></code></pre>
</div>
<div id="api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#api-key" class="anchor"></a>API Key</h2>
<p>To use the NASS Quick Stats API you need an <a href="http://quickstats.nass.usda.gov/api">API key</a>. The API key should in general not be included in scripts. One way of making the key available without defining it in a script is by setting it in your <code>.Renviron</code> file, which is usually located in your home directory. If you are an <code>rstudio</code> user, you can use <code><a href="https://usethis.r-lib.org/reference/edit.html">usethis::edit_r_environ()</a></code> to open your <code>.Renviron</code> file and add a line that looks like:</p>
<pre><code>NASSQS_TOKEN="&lt;your api key here&gt;"</code></pre>
<p>Alternatively, you can set it explicitly in the console by calling <code><a href="reference/nassqs_auth.html">nassqs_auth()</a></code>. This will prompt you to enter the API key if not set, and return the value of the API key if it is set. If you do not set the key and you are running the session interactively, R will ask you for the key when you try to issue a query.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>See the examples in <a href="inst/examples">inst/examples</a> for quick recipes to download data.</p>
<p>The primary function is <code><a href="reference/nassqs.html">nassqs()</a></code>, with which you can make any query of variables. For example, to mirror the request that is on the <a href="http://quickstats.nass.usda.gov/api">NASS API documentation</a>, you can use:</p>
<pre><code>library(nassqs)

# You must set your api key before requesting data
nassqs_auth(key = &lt;your api key&gt;)

# Parameters to query on and data call
params &lt;- list(commodity_desc = "CORN", year__GE = 2012, state_alpha = "VA")
d &lt;- nassqs(params)</code></pre>
<p>Parameters <strong>do not</strong> need to be capitalized, and also do not need to be in a list format. The following works just as well:</p>
<pre><code>d &lt;- nassqs(commodity_desc = "corn", year__GE = 2012, state_alpha = "va")</code></pre>
<p>You can request data for multiple values of the same parameter by using a simple list as follows:</p>
<pre><code>params &lt;- list(commodity_desc = "CORN", year__GE = 2012, state_alpha = c("VA", "WA"))
d = nassqs(params=params)</code></pre>
<p>NASS does not allow GET requests that pull more than 50,000 records in one request. The function will inform you if you try to do that. It will also inform you if you’ve requested a set of parameters for which there are no records.</p>
<p>Other useful functions include:</p>
<pre><code><a href="reference/nassqs_param_values.html"># returns a set of unnique values for the parameter "STATISTICCAT_DESC"
nassqs_param_values("statisticcat_desc")

# returns a count of the number of records for a given query
nassqs_record_count(params=params)

# Get yields specifically
# Equivalent to including "'statisticat_desc' = 'YIELD'" in your parameter list. 
nassqs_yields(params)

# Get acres specifically
# Equivalent to including all "AREA" values in statisticcat_desc
nassqs_acres(params)

# Specifies just "AREA HARVESTED" values of statisticcat_desc
nassqs_acres(params, area = "AREA HARVESTED")</a></code></pre>
<div id="handling-inequalities-and-operators-other-than" class="section level3">
<h3 class="hasAnchor">
<a href="#handling-inequalities-and-operators-other-than" class="anchor"></a>Handling inequalities and operators other than “=”</h3>
<p>The NASS API handles other operators by modifying the variable name. The API can accept the following modifications:</p>
<ul>
<li>__LE: &lt;=</li>
<li>__LT: &lt;</li>
<li>__GT: &gt;</li>
<li>__GE: &gt;=</li>
<li>__LIKE: like</li>
<li>__NOT_LIKE: not like</li>
<li>__NE: not equal</li>
</ul>
<p>For example, to request corn yields in Virginia and Pennsylvania for all years since 2000, you would use something like:</p>
<pre><code>params = list(commodity_desc="CORN", 
              year__GE=2000, 
              state_alpha=c("VA", "PA"), 
              statisticcat_desc="YIELD")
df = nassqs(params=params) #returns data as a data frame.</code></pre>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Contributions are more than welcome, and there are several ways to contribute:</p>
<ul>
<li>Examples: More examples are always helpful. If you use <code>rnassqs</code> to query data from ‘Quick Stats’ and would like to contribute your query, consider submitting a pull request adding your query as a file in <a href="https://github.com/potterzot/rnassqs/tree/master/inst/examples">inst/examples/</a>.</li>
<li>File an issue: If there is functionality you’d like to see added or something that is confusing, consider <a href="https://github.com/potterzot/rnassqs/issues/new">creating an issue</a>. The best issue contains an example of the problem or feature. Consider the excellent package <a href="https://github.com/tidyverse/reprex">reprex</a> in creating a reproducible example.</li>
<li>Contributing documentation: Clarifying and expanding the documentation is always appreciated, especially if you find an area that is lacking and would like to improve it. <code>rnassqs</code> uses roxygen2, which means the documentation is at the top of each function definition. Please submit any improvements as a pull request.</li>
<li>Contributing code: if you see something that needs improving and you’d like to make the changes, contributed code is very welcome. Begin by filing a new issue to discuss the proposed change, and then submit a pull request to address the issue. <code>rnassqs</code> follows the style outlined in Hadley Wickham’s <a href="http://r-pkgs.had.co.nz/style.html">R Packages</a>. Following this style makes the pull request and review go more smoothly.</li>
</ul>
</div>
<div id="alternatives" class="section level2">
<h2 class="hasAnchor">
<a href="#alternatives" class="anchor"></a>Alternatives</h2>
<p>In June 2019 the <code>usdarnass</code> package was released on <a href="https://cran.r-project.org/package=usdarnass">CRAN</a> and is also available to install via <a href="https://github.com/rdinter/usdarnass">github</a>. <code>usdarnass</code> has similar functionality to this package.</p>
<p>NASS also provides a daily tarred and gzipped file of their entire dataset. At the time of writing it is approaching 1 GB. You can download that file via their <a href="ftp://ftp.nass.usda.gov/quickstats">FTP site</a>.</p>
<p>The FTP link also contains builds for: NASS census (every 5 years ending with 2 and 7), or data for one of their specific sectors (CROPS, ECONOMICS, ANIMALS &amp; PRODUCTS). At the time of this writing, specific files for the ENVIRONMENTAL and DEMOGRAPHICS sectors are not available.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rnassqs">https://​cloud.r-project.org/​package=rnassqs</a>
</li>
<li>Browse source code at <br><a href="https://github.com/potterzot/rnassqs">https://​github.com/​potterzot/​rnassqs</a>
</li>
<li>Report a bug at <br><a href="http://www.github.com/potterzot/rnassqs/issues">http://​www.github.com/​potterzot/​rnassqs/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing rnassqs</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Potter <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Potter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
