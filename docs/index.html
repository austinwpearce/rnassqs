<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access the NASS 'Quick Stats' API • rnassqs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access the NASS 'Quick Stats' API">
<meta property="og:description" content="Interface to access data via the United States Department of 
  Agriculture's National Agricultural Statistical Service (NASS) 'Quick Stats' 
  web API &lt;https://quickstats.nass.usda.gov/api&gt;. Convenience functions 
  facilitate building queries based on available parameters and valid parameter 
  values.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rnassqs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/rnassqs.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/rnassqs">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<table class="table table table">
<thead><tr class="header">
<th align="left">
rnassqs
</th>
<th align="left">
Usage
</th>
<th align="left">
Release
</th>
<th align="left">
Development
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td rowspan="5">
<p><img src="inst/figures/rnassqs.png" alt="rnassqs hexsticker" width="200"></p>
(Wheat image from <a href="https://www.flickr.com/photos/53018729@N00/2669034542">here</a>)
</td>
<td align="left">
<a href="http://choosealicense.com/licenses/mit/"><img src="https://img.shields.io/github/license/mashape/apistatus.svg" alt="License"></a>
</td>
<td align="left">
<a href="https://cran.r-project.org/package=rnassqs"><img src="http://www.r-pkg.org/badges/version-last-release/rnassqs" alt="CRAN"></a>
</td>
<td align="left">
<a href="https://github.com/ropensci/rnassqs/commits/master"><img src="https://img.shields.io/badge/last%20change-2019--08--15-brightgreen.svg" alt="Last Change"></a>
</td>
</tr>
<tr class="even">
<td align="left">
<a href="https://CRAN.R-project.org/package=rnassqs"><img src="https://cranlogs.r-pkg.org/badges/rnassqs" alt="downloads"></a>
</td>
<td align="left">
<a href="https://zenodo.org/badge/latestdoi/37335585"><img src="https://zenodo.org/badge/37335585.svg" alt="Zenodo"></a>
</td>
<td align="left">
<a href="https://travis-ci.org/ropensci/rnassqs"><img src="https://travis-ci.org/ropensci/rnassqs.svg?branch=master" alt="Build Status"></a>
</td>
</tr>
<tr class="odd">
<td align="left">
</td>
<td align="left">
<a href="https://github.com/ropensci/onboarding/issues/298" alt="rOpensci reviewed!"><img src="https://badges.ropensci.org/298_status.svg"></a>
</td>
<td align="left">
<a href="https://codecov.io/gh/ropensci/rnassqs"><img src="https://codecov.io/gh/ropensci/rnassqs/branch/master/graph/badge.svg" alt="Coverage Status"></a>
</td>
</tr>
<tr class="even">
<td align="left">
</td>
<td align="left">
<a href="https://orcid.org/0000-0002-3410-3732"><img src="https://img.shields.io/badge/ORCiD-0000--0002--3410--3732-green.svg" alt="ORCID"></a>
</td>
<td align="left">
<a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a>
</td>
</tr>
<tr class="even">
<td align="left">
</td>
<td align="left">
</td>
<td align="left">
<a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Project Status: Maturing."></a>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<div id="rnassqs-r-nass-quick-stats" class="section level2">
<h2 class="hasAnchor">
<a href="#rnassqs-r-nass-quick-stats" class="anchor"></a>rnassqs (R NASS Quick Stats)</h2>
<p><code>rnassqs</code> allows users to access the USDA’s National Agricultural Statistics Service (NASS) ‘Quick Stats’ data through their API. It is simple and easy to use, and provides some functions to help navigate the bewildering complexity of some Quick Stats data.</p>
<p>For docs and code examples, visit the package web page here: <a href="https://ropensci.github.io/rnassqs/">https://ropensci.github.io/rnassqs/</a>.</p>
</div>
<div id="installing" class="section level2">
<h2 class="hasAnchor">
<a href="#installing" class="anchor"></a>Installing</h2>
<p>Install the package via <code>devtools</code> or CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>    <span class="co"># Via devtools</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(devtools)</span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">'ropensci/rnassqs'</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a>    </span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="co"># Via CRAN</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>    <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"rnassqs"</span>)</span></code></pre></div>
</div>
<div id="api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#api-key" class="anchor"></a>API Key</h2>
<p>To use the NASS Quick Stats API you need an <a href="http://quickstats.nass.usda.gov/api">API key</a>. The API key should in general not be included in scripts. One way of making the key available without defining it in a script is by setting it in your <code>.Renviron</code> file, which is usually located in your home directory. If you are an <code>rstudio</code> user, you can use <code><a href="https://usethis.r-lib.org/reference/edit.html">usethis::edit_r_environ()</a></code> to open your <code>.Renviron</code> file and add a line that looks like:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>    NASSQS_TOKEN=<span class="st">"&lt;your api key here&gt;"</span></span></code></pre></div>
<p>Alternatively, you can set it explicitly in the console with <code>nassqs_auth(key = &lt;your api key&gt;)</code>. This will set the environmental variable NASSQS_TOKEN, which is used to access the API. You can also set this directly with <code>Sys.setenv("NASSQS_TOKEN" = &lt;your api key&gt;)</code>.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>See the examples in <a href="inst/examples">inst/examples</a> for quick recipes to download data.</p>
<p>The primary function is <code><a href="reference/nassqs.html">nassqs()</a></code>, with which you can make any query of variables. For example, to mirror the request that is on the <a href="http://quickstats.nass.usda.gov/api">NASS API documentation</a>, you can use:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(nassqs)</span>
<span id="cb3-2"><a href="#cb3-2"></a>    </span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="co"># You must set your api key before requesting data</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="kw"><a href="reference/nassqs_auth.html">nassqs_auth</a></span>(<span class="dt">key =</span> <span class="op">&lt;</span>your api key<span class="op">&gt;</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a>    </span>
<span id="cb3-6"><a href="#cb3-6"></a>    <span class="co"># Parameters to query on and data call</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>    params &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">commodity_desc =</span> <span class="st">"CORN"</span>, <span class="dt">year__GE =</span> <span class="dv">2012</span>, <span class="dt">state_alpha =</span> <span class="st">"VA"</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a>    d &lt;-<span class="st"> </span><span class="kw"><a href="reference/nassqs.html">nassqs</a></span>(params)</span></code></pre></div>
<p>Parameters <strong>do not</strong> need to be capitalized, and also do not need to be in a list format. The following works just as well:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>    d &lt;-<span class="st"> </span><span class="kw"><a href="reference/nassqs.html">nassqs</a></span>(<span class="dt">commodity_desc =</span> <span class="st">"corn"</span>, <span class="dt">year__GE =</span> <span class="dv">2012</span>, <span class="dt">state_alpha =</span> <span class="st">"va"</span>)</span></code></pre></div>
<p>You can request data for multiple values of the same parameter by using a simple list as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>    params &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">commodity_desc =</span> <span class="st">"CORN"</span>, <span class="dt">year__GE =</span> <span class="dv">2012</span>, <span class="dt">state_alpha =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"VA"</span>, <span class="st">"WA"</span>))</span>
<span id="cb5-2"><a href="#cb5-2"></a>    d &lt;-<span class="st"> </span><span class="kw"><a href="reference/nassqs.html">nassqs</a></span>(params)</span></code></pre></div>
<p>NASS does not allow GET requests that pull more than 50,000 records in one request. The function will inform you if you try to do that. It will also inform you if you’ve requested a set of parameters for which there are no records.</p>
<p>Other useful functions include:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>    <span class="co"># returns a set of unnique values for the parameter "STATISTICCAT_DESC"</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="kw"><a href="reference/nassqs_param_values.html">nassqs_param_values</a></span>(<span class="st">"statisticcat_desc"</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>    </span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="co"># returns a count of the number of records for a given query</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="kw"><a href="reference/nassqs_record_count.html">nassqs_record_count</a></span>(<span class="dt">params=</span>params)</span>
<span id="cb6-6"><a href="#cb6-6"></a>    </span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="co"># Get yields specifically</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="co"># Equivalent to including "'statisticat_desc' = 'YIELD'" in your parameter list. </span></span>
<span id="cb6-9"><a href="#cb6-9"></a>    <span class="kw"><a href="reference/nassqs_yields.html">nassqs_yields</a></span>(params)</span>
<span id="cb6-10"><a href="#cb6-10"></a>    </span>
<span id="cb6-11"><a href="#cb6-11"></a>    <span class="co"># Get acres specifically</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>    <span class="co"># Equivalent to including all "AREA" values in statisticcat_desc</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>    <span class="kw"><a href="reference/nassqs_acres.html">nassqs_acres</a></span>(params)</span>
<span id="cb6-14"><a href="#cb6-14"></a>    </span>
<span id="cb6-15"><a href="#cb6-15"></a>    <span class="co"># Specifies just "AREA HARVESTED" values of statisticcat_desc</span></span>
<span id="cb6-16"><a href="#cb6-16"></a>    <span class="kw"><a href="reference/nassqs_acres.html">nassqs_acres</a></span>(params, <span class="dt">area =</span> <span class="st">"AREA HARVESTED"</span>)</span></code></pre></div>
<div id="handling-inequalities-and-operators-other-than" class="section level3">
<h3 class="hasAnchor">
<a href="#handling-inequalities-and-operators-other-than" class="anchor"></a>Handling inequalities and operators other than “=”</h3>
<p>The NASS API handles other operators by modifying the variable name. The API can accept the following modifications:</p>
<ul>
<li>__LE: &lt;=</li>
<li>__LT: &lt;</li>
<li>__GT: &gt;</li>
<li>__GE: &gt;=</li>
<li>__LIKE: like</li>
<li>__NOT_LIKE: not like</li>
<li>__NE: not equal</li>
</ul>
<p>For example, to request corn yields in Virginia and Pennsylvania for all years since 2000, you would use something like:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>    params &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">commodity_desc =</span> <span class="st">"CORN"</span>, </span>
<span id="cb7-2"><a href="#cb7-2"></a>                  <span class="dt">year__GE =</span> <span class="dv">2000</span>, </span>
<span id="cb7-3"><a href="#cb7-3"></a>                  <span class="dt">state_alpha =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"VA"</span>, <span class="st">"PA"</span>), </span>
<span id="cb7-4"><a href="#cb7-4"></a>                  <span class="dt">statisticcat_desc =</span> <span class="st">"YIELD"</span>)</span>
<span id="cb7-5"><a href="#cb7-5"></a>    df &lt;-<span class="st"> </span><span class="kw"><a href="reference/nassqs.html">nassqs</a></span>(params) <span class="co">#returns data as a data frame.</span></span></code></pre></div>
<p>See the <a href="https://ropensci.github.io/rnassqs/articles/rnassqs.html">vignette</a> for more examples and details on usage.</p>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Contributions are more than welcome, and there are several ways to contribute:</p>
<ul>
<li>Examples: More examples are always helpful. If you use <code>rnassqs</code> to query data from ‘Quick Stats’ and would like to contribute your query, consider submitting a pull request adding your query as a file in <a href="https://github.com/ropensci/rnassqs/tree/master/inst/examples">inst/examples/</a>.</li>
<li>File an issue: If there is functionality you’d like to see added or something that is confusing, consider <a href="https://github.com/ropensci/rnassqs/issues/new">creating an issue</a>. The best issue contains an example of the problem or feature. Consider the excellent package <a href="https://github.com/tidyverse/reprex">reprex</a> in creating a reproducible example.</li>
<li>Contributing documentation: Clarifying and expanding the documentation is always appreciated, especially if you find an area that is lacking and would like to improve it. <code>rnassqs</code> uses roxygen2, which means the documentation is at the top of each function definition. Please submit any improvements as a pull request.</li>
<li>Contributing code: if you see something that needs improving and you’d like to make the changes, contributed code is very welcome. Begin by filing a new issue to discuss the proposed change, and then submit a pull request to address the issue. <code>rnassqs</code> follows the style outlined in Hadley Wickham’s <a href="http://r-pkgs.had.co.nz/style.html">R Packages</a>. Following this style makes the pull request and review go more smoothly.</li>
</ul>
</div>
<div id="alternatives" class="section level2">
<h2 class="hasAnchor">
<a href="#alternatives" class="anchor"></a>Alternatives</h2>
<p>In June 2019 the <code>usdarnass</code> package was released on <a href="https://cran.r-project.org/package=usdarnass">CRAN</a> and is also available to install via <a href="https://github.com/rdinter/usdarnass">github</a>. <code>usdarnass</code> has similar functionality to this package.</p>
<p>NASS also provides a daily tarred and gzipped file of their entire dataset. At the time of writing it is approaching 1 GB. You can download that file via their <a href="ftp://ftp.nass.usda.gov/quickstats">FTP site</a>.</p>
<p>The FTP link also contains builds for: NASS census (every 5 years ending with 2 and 7), or data for one of their specific sectors (CROPS, ECONOMICS, ANIMALS &amp; PRODUCTS). At the time of this writing, specific files for the ENVIRONMENTAL and DEMOGRAPHICS sectors are not available.</p>
<div id="acknowledgements" class="section level3">
<h3 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h3>
<p>Thank you to rOpensci reviewers Adam Sparks and Neal Richardson and editor Lincoln Mullen, for their fantastic feedback and assistance. User feedback and use case contributions have been a huge help to make <code>rnassqs</code> more accessible and user-friendly. More use cases or feature requests are always welcome!</p>
<p><a href="https://ropensci.org"><img src="https://ropensci.org/public_images/ropensci_footer.png" alt="ropensci_footer"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rnassqs">https://​cloud.r-project.org/​package=rnassqs</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ropensci/rnassqs">https://​github.com/​ropensci/​rnassqs</a>
</li>
<li>Report a bug at <br><a href="http://www.github.com/ropensci/rnassqs/issues">http://​www.github.com/​ropensci/​rnassqs/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing rnassqs</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Potter <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Potter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
